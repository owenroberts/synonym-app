<!--  bridge -->
{{> loader}}
{{> report}}

<div id="header">
	<div id="home-btn"><a class="big-btn" href="/" tabindex="1">new</a></div>
	<div id="re-bridge-btn"><a class="btn" tabindex="2">re-bridge</a></div>
	<div id="edit-bridge-btn"><a class="btn" tabindex="3">edit-bridge</a></div>
</div>

<div id="chains">
	<div class="chain fade current" id="chain-0">
		<div class="nodes">
			{{#each data.chain}}
				<div class="node fade" data-word={{this.word}} data-index={{@index}} data-syndex={{this.syndex}}>
					<div class="word">
						<a tabindex="0" class="fade visible" onclick={B.getDef();} onkeypress={B.getDef();} >{{this.word}}</a>
					</div>
					{{#unless @first}}
						{{#unless @last}}
							<div class="mod-options">
								<div class="mod-close" onclick={B.closeModOptions(this,false);}>
									<img src="/img/mod-close.svg">
								</div>
								<div class="mod-btn" onclick={B.modifyChain(this);B.btnAnim(this);}>
									<img src="/img/mod-down-arrow.svg" alt="">
								</div>
								<div class="prev" onclick={B.newSyn(this);B.btnAnim(this);}>
									<img src="/img/mod-left-arrow.svg" alt="">
								</div>
								<div class="next" onclick={B.newSyn(this);B.btnAnim(this);}>
									<img src="/img/mod-right-arrow.svg" alt="">
								</div>
							</div>
							<div class="mod-open" onclick={B.openModOptions(this)}>
								<img src="/img/mod-open.svg" class="active">
							</div>
						{{/unless}}
					{{/unless}}
				</div>
			{{/each}}
		</div>
	</div>
</div>

<div id="chain-nav">
	<div id="inner-chain-nav">
		<div id="prev-chain" class="chain-btn" tabindex="0">
			{{> prev-arrow}}
		</div>
		<div id="dots">
			<div class="chain-dot" onclick={B.showChain(0)}></div>
		</div>
		<div id="next-chain" class="chain-btn" tabindex="0">
			{{> next-arrow}}
		</div>
	</div>
</div>

<script type="text/javascript">
	B = {}; // need B for helpers
</script>
<script src="/js/helpers.js"></script>
<script src="/js/bridge.js"></script>
<script src="/js/new.js"></script>  {{!-- "re-bridge" --}}
<script src="/js/mod.js"></script> {{!-- "edit-bridge" --}}
<script src="/js/def.js"></script>
<script type="text/javascript">
	window.addEventListener('load', function() {
		const d = {{{json data}}};
		B.currentChain = 0;
		B.chains[B.currentChain] = d.chain;
		B.startWord = d.start;
		B.endWord = d.end;
		B.queryStrings.push(d.queryString);
	});
</script>